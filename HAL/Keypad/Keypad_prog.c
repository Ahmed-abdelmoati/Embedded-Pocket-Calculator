#include "../../Services/STD_types.h"#include "../../Services/BIT_math.h"#include "Keypad_int.h"#include "Keypad_Config.h"#include "Keypad_priv.h"#include "../../MCL/DIO_dynamic/DIO_dynamic_int.h"static void Keypad_u8_Set_Col(u8 Copy_u8_Col){//sequence	switch (Copy_u8_Col){	case KEYPAD_u8_Set_C1:		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C1,DIO_Dyn_u8_LOW);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C2,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C3,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C4,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C5,DIO_Dyn_u8_HIGH);			break;	case KEYPAD_u8_Set_C2:		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C1,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C2,DIO_Dyn_u8_LOW);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C3,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C4,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C5,DIO_Dyn_u8_HIGH);		break;	case KEYPAD_u8_Set_C3:		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C1,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C2,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C3,DIO_Dyn_u8_LOW);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C4,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C5,DIO_Dyn_u8_HIGH);		break;	case KEYPAD_u8_Set_C4:		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C1,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C2,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C3,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C4,DIO_Dyn_u8_LOW);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C5,DIO_Dyn_u8_HIGH);		break;	case KEYPAD_u8_Set_C5:		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C1,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C2,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C3,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C4,DIO_Dyn_u8_HIGH);		DIO_Dyn_vid_SetPinValue(KEYPAD_u8_C5,DIO_Dyn_u8_LOW);		break;	}}void Keypad_vid_Init(void){	DIO_Dyn_vid_SetPinDir(KEYPAD_u8_R1,DIO_Dyn_u8_INPUT);	DIO_Dyn_vid_SetPinDir(KEYPAD_u8_R2,DIO_Dyn_u8_INPUT);	DIO_Dyn_vid_SetPinDir(KEYPAD_u8_R3,DIO_Dyn_u8_INPUT);	DIO_Dyn_vid_SetPinDir(KEYPAD_u8_R4,DIO_Dyn_u8_INPUT);	DIO_Dyn_vid_SetPinDir(KEYPAD_u8_C1,DIO_Dyn_u8_OUTPUT);	DIO_Dyn_vid_SetPinDir(KEYPAD_u8_C2,DIO_Dyn_u8_OUTPUT);	DIO_Dyn_vid_SetPinDir(KEYPAD_u8_C3,DIO_Dyn_u8_OUTPUT);	DIO_Dyn_vid_SetPinDir(KEYPAD_u8_C4,DIO_Dyn_u8_OUTPUT);	DIO_Dyn_vid_SetPinDir(KEYPAD_u8_C5,DIO_Dyn_u8_OUTPUT);	DIO_Dyn_vid_SetPinValue(KEYPAD_u8_R1,DIO_Dyn_u8_HIGH);//pull up	DIO_Dyn_vid_SetPinValue(KEYPAD_u8_R2,DIO_Dyn_u8_HIGH);	DIO_Dyn_vid_SetPinValue(KEYPAD_u8_R3,DIO_Dyn_u8_HIGH);	DIO_Dyn_vid_SetPinValue(KEYPAD_u8_R4,DIO_Dyn_u8_HIGH);}u8 Keypad_u8_Get_Button(void){	u8  Local_u8_Button='\0' ;	Keypad_u8_Set_Col( KEYPAD_u8_Set_C1);	Local_u8_Button=Keypad_u8_Check_Row(KEY_u8_C1);	if(Local_u8_Button!='\0')		return Local_u8_Button;	Keypad_u8_Set_Col( KEYPAD_u8_Set_C2);	Local_u8_Button=Keypad_u8_Check_Row(KEY_u8_C2);	if(Local_u8_Button!='\0')		return Local_u8_Button;	Keypad_u8_Set_Col( KEYPAD_u8_Set_C3);	Local_u8_Button=Keypad_u8_Check_Row(KEY_u8_C3);	if(Local_u8_Button!='\0')		return Local_u8_Button;	Keypad_u8_Set_Col( KEYPAD_u8_Set_C4);	Local_u8_Button=Keypad_u8_Check_Row(KEY_u8_C4);	if(Local_u8_Button!='\0')		return Local_u8_Button;	Keypad_u8_Set_Col( KEYPAD_u8_Set_C5);		Local_u8_Button=Keypad_u8_Check_Row(KEY_u8_C5);		if(Local_u8_Button!='\0')			return Local_u8_Button;		return '\0';} static u8 Keypad_u8_Check_Row(u8 Copy_u8_Col){	 u8 Local_u8_Data='\0';	if( DIO_Dyn_u8_GetPinValue(KEYPAD_u8_R1 )==DIO_Dyn_u8_LOW )	     switch (Copy_u8_Col){			  case KEY_u8_C1:							Local_u8_Data=KEYPAD_u8_R1C1	;							break;			case KEY_u8_C2:							Local_u8_Data=KEYPAD_u8_R1C2	;							break;			case KEY_u8_C3:							Local_u8_Data= KEYPAD_u8_R1C3	;							break;			case KEY_u8_C4:							Local_u8_Data= KEYPAD_u8_R1C4	;							break;			case KEY_u8_C5:							Local_u8_Data= KEYPAD_u8_R1C5	;							break;		 }		 else if( DIO_Dyn_u8_GetPinValue(KEYPAD_u8_R2 )==DIO_Dyn_u8_LOW )	     switch (Copy_u8_Col){			  case KEY_u8_C1:							Local_u8_Data=KEYPAD_u8_R2C1	;							break;			case KEY_u8_C2:							Local_u8_Data=KEYPAD_u8_R2C2	;							break;			case KEY_u8_C3:							Local_u8_Data= KEYPAD_u8_R2C3	;							break;			case KEY_u8_C4:							Local_u8_Data= KEYPAD_u8_R2C4	;							break;			case KEY_u8_C5:							Local_u8_Data= KEYPAD_u8_R2C5	;							break;		 }		 else if( DIO_Dyn_u8_GetPinValue(KEYPAD_u8_R3 )==DIO_Dyn_u8_LOW )	     switch (Copy_u8_Col){			  case KEY_u8_C1:							Local_u8_Data=KEYPAD_u8_R3C1	;							break;			case KEY_u8_C2:							Local_u8_Data=KEYPAD_u8_R3C2	;							break;			case KEY_u8_C3:							Local_u8_Data= KEYPAD_u8_R3C3	;							break;			case KEY_u8_C4:							Local_u8_Data= KEYPAD_u8_R3C4	;							break;			case KEY_u8_C5:							Local_u8_Data= KEYPAD_u8_R3C5	;							break;		 }		 else if( DIO_Dyn_u8_GetPinValue(KEYPAD_u8_R4 )==DIO_Dyn_u8_LOW )	     switch (Copy_u8_Col){			case KEY_u8_C1:							Local_u8_Data=KEYPAD_u8_R4C1	;							break;			case KEY_u8_C2:							Local_u8_Data=KEYPAD_u8_R4C2	;							break;			case KEY_u8_C3:							Local_u8_Data= KEYPAD_u8_R4C3	;							break;			case KEY_u8_C4:							Local_u8_Data= KEYPAD_u8_R4C4	;							break;			case KEY_u8_C5:							Local_u8_Data= KEYPAD_u8_R4C5	;							break;		 }		 return Local_u8_Data;}